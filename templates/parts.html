<!DOCTYPE html>
<html>
<head>
    <title>Kart Manager - Pezzi</title>
    <link rel="icon" type="image/png" href="https://www.k1speed.com/wp-content/uploads/2025/10/k1speed-logo-short-red.png">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="overlay">

    <h1>ğŸ› Gestione Pezzi</h1>

    <div class="top-nav">
        <a href="/" class="nav-btn">Gestione Riparazioni</a>
        <a href="/karts" class="nav-btn">ğŸï¸ Gestione Kart</a>
        <a href="/parts" class="nav-btn">ğŸ› ï¸ Gestione Pezzi</a>
        <a href="/technicians" class="nav-btn">ğŸ‘¨â€ğŸ”§ Gestione Tecnici</a>
    </div>

    <form action="/add_part" method="post">
        <input type="text" name="nome_pezzo" placeholder="Nome Pezzo" required>
        <input type="text" name="codice" placeholder="Codice" required>
        <input type="number" step="0.01" name="costo_unitario" placeholder="Costo Unitario" required>
        <button type="submit">Aggiungi Pezzo</button>
    </form>

    <table>
        <tr>
            <th>ID</th>
            <th>Nome Pezzo</th>
            <th>Codice</th>
            <th>Costo Unitario (â‚¬)</th>
            <th>Ricomprare</th>
            <th>Elimina</th>
        </tr>

        {% for p in parts %}
        <tr>
            <td>{{ p[0] }}</td>

            <td><b>#{{ p[1] }}</b></td>

            <td>{{ p[2] }}</td>

            <td>{{ p[3] }} â‚¬</td>

            <td class="reorder-cell" style="text-align: center;">
                <form action="/toggle_reorder/{{ p[0] }}" method="post" style="display: inline;">
                    <label class="switch">
                        <input type="checkbox"
                            {% if p[4] %}checked{% endif %}
                            onchange="this.form.submit()">
                        <span class="slider"></span>
                    </label>
                </form>
            </td>

            <td>
                <button onclick="if(confirm('Sei sicuro di voler eliminare questo pezzo?')) { location.href='/remove_part/{{ p[0] }}'; }">
                    ğŸ—‘ï¸
                </button>
            </td>
        </tr>
        {% endfor %}
    </table>

</div>

</body>
</html>
